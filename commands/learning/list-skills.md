---
name: list-skills
description: Lists all discovered skills from workflow plugin, project-generated skills, and external plugins. Shows skill source, scope, auto-trigger status, and indicates which were generated by workflow vs manually created. Use to discover available capabilities.
argument-hint: "[optional: filter] where filter is: all|workflow|project|generated|external"
allowed-tools: ["Read", "Grep", "Glob", "Bash"]
---

You are executing the **/workflow:list-skills** command to display all discovered skills and their metadata.

## Purpose

Display comprehensive skill inventory:
1. List all skills discovered in session
2. Show skill source (workflow, project, external plugins)
3. Indicate generated vs manual skills
4. Display auto-trigger status
5. Show usage statistics if available
6. Help users understand available capabilities

## Skill Discovery

### Step 1: Load Discovery Cache

Read discovered capabilities from session:

```bash
# Load session state with discovered capabilities
cat .workflow/state/session_state.json

# Check for capability cache
jq '.discovered_capabilities.skills' .workflow/state/session_state.json
```

### Step 2: Scan Workflow Plugin Skills

Find skills in this plugin:

```bash
# Find all SKILL.md files in workflow plugin
find ${CLAUDE_PLUGIN_ROOT}/skills \
  -name "SKILL.md" -type f

# Read frontmatter from each
for skill in $(find ... -name "SKILL.md"); do
  head -20 "$skill" | grep -A 3 "^---$"
done
```

**Workflow skills:**
- Context management
- TDD enforcement
- Planning guidance
- Solution capture
- Verification protocols
- Recovery procedures

### Step 3: Scan Project Skills

Find project-generated skills:

```bash
# Find skills in project .workflow directory
find .workflow/skills -name "SKILL.md" -type f

# Check registry
cat .workflow/skills/registry.json
```

**Project skills:**
- Generated from patterns
- Project-specific techniques
- Captured learnings

### Step 4: Scan External Plugin Skills

Check discovered capabilities for external skills:

```bash
# From session state discovered_capabilities
jq '.discovered_capabilities.skills[] | select(.scope != "workflow")' \
  .workflow/state/session_state.json
```

**External skills:**
- GitHub plugin skills
- GitLab plugin skills
- Other installed plugins

### Step 5: Gather Skill Metadata

For each skill, collect:

**From frontmatter:**
- `name` - Skill display name
- `description` - When to use
- `version` - Skill version
- `auto_trigger` - Auto-applied or manual

**From metadata (if exists):**
- `generated` - Generated vs manual
- `source_category` - Category if generated
- `pattern_occurrence_count` - Pattern strength
- `usage_count` - Times used
- `last_used` - Last usage timestamp
- `effectiveness_rating` - User rating

**From location:**
- `scope` - workflow / project / external
- `plugin` - Source plugin name
- `file_path` - Location of SKILL.md

## Output Formats

### Default Format (All Skills)

```markdown
## Available Skills

### Workflow Skills (Core)
Skills from adaptive-workflow plugin:

| Skill | Description | Auto-Trigger | Version |
|-------|-------------|--------------|---------|
| Context Window Management | Manages context in Phase 4.5B | Manual | 0.1.0 |
| TDD Enforcement | Iron Law TDD during implementation | Always | 0.1.0 |
| Planning Guidance | Task breakdown in Phase 3 | Manual | 0.1.0 |
| Solution Capture | Captures learnings in Phase 6 | Auto | 0.1.0 |
| Verification Protocols | Evidence-based verification | Always | 0.1.0 |
| Recovery Procedures | Systematic debugging | Auto | 0.1.0 |

**Total:** {count} core workflow skills

### Project Skills (Generated)
Skills generated from patterns in this project:

| Skill | Source | Occurrences | Auto-Trigger | Used |
|-------|--------|-------------|--------------|------|
| {skill_name} | {category} | {count}x | {yes/no} | {count}x |
| {skill_name} | {category} | {count}x | {yes/no} | {count}x |

**Total:** {count} project-specific skills

### External Plugin Skills
Skills from other installed plugins:

| Skill | Plugin | Description | Scope |
|-------|--------|-------------|-------|
| {skill_name} | github | {description} | Global |
| {skill_name} | gitlab | {description} | Global |

**Total:** {count} external skills

---

**Grand Total:** {total_count} skills available

**Legend:**
- ü§ñ Auto-trigger: Automatically applied when conditions met
- üìñ Manual: Invoke explicitly when needed
- ‚≠ê Generated: Created from learned patterns
- üîß Core: Built-in workflow skills
```

### Filtered Views

#### Filter: workflow

Show only core workflow skills:

```markdown
## Workflow Skills (Core Capabilities)

### Phase 0: Context Loading
üìñ **Context Window Management**
   When: Phase 4.5B, context >50%
   File: adaptive-workflow/skills/context/SKILL.md
   Version: 0.1.0

   Manages context window efficiently to prevent information loss
   and enable seamless handoffs between agent instances.

### Phase 3: Planning
üìñ **Planning Guidance**
   When: Phase 3, breaking work into tasks
   File: adaptive-workflow/skills/workflow/planning/SKILL.md
   Version: 0.1.0

   Guides task breakdown, dependency mapping, and complexity
   classification for systematic planning.

### Phase 4: Implementation
ü§ñ **TDD Enforcement**
   When: Phase 4, any code changes
   File: adaptive-workflow/skills/workflow/tdd/SKILL.md
   Version: 0.1.0
   Auto-trigger: ALWAYS

   Enforces Iron Law TDD: Red ‚Üí Green ‚Üí Refactor.
   No code without failing test first.

### Phase 4.5: Verification
ü§ñ **Verification Protocols**
   When: Phase 4.5, claiming success
   File: adaptive-workflow/skills/workflow/verification/SKILL.md
   Version: 0.1.0
   Auto-trigger: ALWAYS

   Evidence-based validation. Every claim requires proof
   command execution and verification.

### Phase 6: Learning
ü§ñ **Solution Capture**
   When: Phase 6, after solving problems
   File: adaptive-workflow/skills/workflow/solution-capture/SKILL.md
   Version: 0.1.0
   Auto-trigger: When user says "that worked", "it's fixed"

   Captures solutions systematically for compound learning.

### Recovery & Debugging
ü§ñ **Recovery Procedures**
   When: Test failures, blockers, debugging
   File: adaptive-workflow/skills/recovery/SKILL.md
   Version: 0.1.0
   Auto-trigger: On failures

   Systematic 5-phase debugging protocol.

**Total:** {count} workflow skills
```

#### Filter: project

Show only project-generated skills:

```markdown
## Project Skills (Generated from Patterns)

‚≠ê **{Skill Name}**
   Category: {category}
   Generated: {date}
   Pattern Strength: {occurrence_count} occurrences
   Auto-trigger: {yes/no}
   Used: {usage_count} times
   File: .workflow/skills/{category}/{skill-name}/SKILL.md

   {description}

   **Source Solutions:**
   - {solution_1}
   - {solution_2}
   - {solution_3}

---

{Repeat for each project skill}

---

**Total:** {count} project-generated skills

**Generation Stats:**
- Total patterns analyzed: {count}
- Solutions captured: {count}
- Patterns promoted to skills: {count}
- Average occurrences: {avg}

**To generate new skills:**
Run `/workflow:create-skill [category]` when you have 3+ similar solutions.
```

#### Filter: generated

Show only auto-generated skills (subset of project):

```markdown
## Auto-Generated Skills

Skills created by pattern analysis from learned solutions.

{List only skills where generated: true in metadata}

**Generation Quality:**
- High confidence (‚â•5 occurrences): {count}
- Medium confidence (3-4 occurrences): {count}
- Novel patterns (manual): {count}
```

#### Filter: external

Show only skills from other plugins:

```markdown
## External Plugin Skills

Skills provided by installed plugins.

### GitHub Plugin
{List GitHub skills if plugin installed}

### GitLab Plugin
{List GitLab skills if plugin installed}

### Gitea Plugin
{List Gitea skills if plugin installed}

### Other Plugins
{List any other plugin skills}

**Note:** External skills are globally available across all projects.
```

### Detailed Format

Show complete information for each skill:

```markdown
## Detailed Skill Inventory

### 1. Context Window Management
**Scope:** Workflow (Core)
**File:** ${CLAUDE_PLUGIN_ROOT}/skills/context/SKILL.md
**Version:** 0.1.0
**Auto-trigger:** Manual
**Generated:** No

**Description:**
This skill should be used during Phase 4.5B (Context Sync) when context
window usage exceeds 50%, after each task completion in long sessions, or
when spawning fresh agents. Manages context window efficiently to prevent
information loss and enable seamless handoffs between agent instances.

**When to Use:**
- Context usage exceeds 50% threshold
- Task completes in long session
- Agent shows signs of confusion
- Preparing to spawn fresh agent
- Resuming work after pause

**Integration:**
- Phase: 4.5B (Context Sync)
- Command: /workflow:context-sync

**Usage Statistics:**
- Times invoked: {count}
- Last used: {timestamp}
- Effectiveness: {rating}

---

{Repeat for each skill with full details}
```

### JSON Format

Machine-readable output:

```json
{
  "skills": {
    "workflow": [
      {
        "name": "Context Window Management",
        "id": "adaptive-workflow:context",
        "scope": "workflow",
        "plugin": "adaptive-workflow",
        "file_path": "/path/to/skills/context/SKILL.md",
        "version": "0.1.0",
        "description": "...",
        "auto_trigger": false,
        "generated": false,
        "applies_to_phases": ["4.5B"],
        "commands": ["/workflow:context-sync"],
        "usage_count": 0,
        "last_used": null
      }
    ],
    "project": [
      {
        "name": "{Skill Name}",
        "id": "{category}:{skill-name}",
        "scope": "project",
        "plugin": null,
        "file_path": ".workflow/skills/{category}/{skill-name}/SKILL.md",
        "version": "1.0.0",
        "description": "...",
        "auto_trigger": true,
        "generated": true,
        "generation_method": "pattern_analysis",
        "source_category": "{category}",
        "pattern_occurrence_count": 5,
        "source_solutions": [...],
        "usage_count": 3,
        "last_used": "{timestamp}",
        "effectiveness_rating": 4.5
      }
    ],
    "external": [
      {
        "name": "{Skill Name}",
        "id": "{plugin}:{skill}",
        "scope": "global",
        "plugin": "{plugin-name}",
        "file_path": "...",
        "description": "...",
        "auto_trigger": false,
        "generated": false
      }
    ]
  },
  "summary": {
    "total_skills": 12,
    "workflow_skills": 6,
    "project_skills": 3,
    "external_skills": 3,
    "auto_trigger_skills": 4,
    "generated_skills": 3,
    "manual_skills": 9
  }
}
```

## Skill Information Details

### Core Workflow Skills

**Always Available:**
1. **Context Window Management** - Phase 4.5B context sync
2. **TDD Enforcement** - Iron Law TDD in Phase 4
3. **Planning Guidance** - Task breakdown in Phase 3
4. **Solution Capture** - Learning capture in Phase 6
5. **Verification Protocols** - Evidence-based verification
6. **Recovery Procedures** - Systematic debugging

### Project Skill Categories

Skills can be generated from:
- `performance-issues/` - Performance optimization patterns
- `database-issues/` - Database problem patterns
- `security-issues/` - Security fix patterns
- `integration-issues/` - Integration patterns
- `configuration-issues/` - Config patterns
- `testing-strategies/` - Testing approach patterns
- `patterns/` - General code patterns

### Skill Scope Levels

**Workflow (Core):**
- Built into adaptive-workflow plugin
- Available to all projects
- Maintained by plugin authors

**Project:**
- Generated from this project's patterns
- Specific to this codebase
- Stored in `.workflow/skills/`
- Auto-discovered in project sessions

**Global (External):**
- From other installed plugins
- Available across all projects
- Maintained by plugin authors

## Discovery and Usage

### Auto-Discovery Process

Skills are discovered during session initialization (Phase 0E):

1. **Scan workflow plugin** - Load core skills
2. **Scan project directory** - Find `.workflow/skills/`
3. **Check external plugins** - Load from other plugins
4. **Cache to session** - Store in `session_state.json`
5. **Apply auto-triggers** - Register trigger conditions

### Auto-Trigger Behavior

**Always applied:**
- TDD Enforcement (Phase 4)
- Verification Protocols (Phase 4.5)

**Conditionally applied:**
- Solution Capture (when user says "that worked")
- Recovery Procedures (on test failures)
- Project skills with auto_trigger: true

**Manual invocation:**
- Context Window Management (/workflow:context-sync)
- Planning Guidance (used in Phase 3)
- Other skills as needed

## Usage Statistics

If usage tracking is enabled:

```markdown
## Skill Usage Statistics

**Most Used Skills:**
1. TDD Enforcement: {count} invocations
2. Verification Protocols: {count} invocations
3. {project_skill}: {count} invocations

**Most Effective Skills:**
1. {skill_name}: {rating}/5.0
2. {skill_name}: {rating}/5.0
3. {skill_name}: {rating}/5.0

**Recently Used:**
- {skill_name}: {timestamp}
- {skill_name}: {timestamp}
- {skill_name}: {timestamp}

**Never Used:**
- {skill_name}
- {skill_name}
```

## Error Handling

**No session state:**
```markdown
‚ö†Ô∏è No active session found

To discover skills, start a workflow session:
- /workflow:setup (for new project)
- /workflow:plan (to start work)

Or scan manually:
- Workflow skills: adaptive-workflow/skills/
- Project skills: .workflow/skills/
```

**No project skills:**
```markdown
## Project Skills

No project-specific skills generated yet.

**To generate skills:**
1. Capture solutions with /workflow:compound
2. When you have 3+ similar solutions, run /workflow:create-skill
3. Skills will appear here in next session

**Current solutions:**
{Show count by category}
```

**No external plugins:**
```markdown
## External Plugin Skills

No external plugins with skills installed.

**Available plugins with skills:**
- github-plugin (GitHub workflows)
- gitlab-plugin (GitLab workflows)
- commit-commands (Git commit helpers)

Install plugins to expand capabilities.
```

## Command Arguments

**No arguments (all skills):**
```bash
/workflow:list-skills
```
Shows all skills grouped by source.

**Filter by source:**
```bash
/workflow:list-skills workflow    # Core workflow skills only
/workflow:list-skills project     # Project-generated only
/workflow:list-skills generated   # Auto-generated only
/workflow:list-skills external    # External plugin skills only
```

**Detailed view:**
```bash
/workflow:list-skills detailed
```
Shows complete information for each skill.

**JSON output:**
```bash
/workflow:list-skills json
```
Machine-readable format for scripting.

## Integration Points

**Reads from:**
- `.workflow/state/session_state.json` - Discovery cache
- `.workflow/skills/registry.json` - Project skill registry
- `.workflow/skills/**/SKILL.md` - Project skills
- `adaptive-workflow/skills/**/SKILL.md` - Workflow skills
- External plugin skill directories

**Does NOT modify any files** - Read-only operation

## Use Cases

**Discover capabilities:**
- See what skills are available
- Understand when skills auto-trigger
- Find project-specific patterns

**Verify skill generation:**
- Confirm skill created successfully
- Check skill appears in inventory
- Validate auto-trigger settings

**Debug skill issues:**
- Verify skill discovered properly
- Check skill file paths
- Confirm scope and metadata

**Team onboarding:**
- Show project-specific techniques
- Explain learned patterns
- Document project capabilities

## Related Commands

- `/workflow:create-skill` - Generate new skill from patterns
- `/workflow:compound` - Capture learnings (creates solutions for skills)
- `/workflow:metrics` - View skill usage statistics

## Best Practices

**Do:**
- Review skills at project start
- Check for project-specific skills
- Understand auto-trigger conditions
- Use skills to maintain consistency

**Don't:**
- Assume skill exists without checking
- Ignore auto-triggered skills
- Skip reading skill descriptions
- Create duplicate skills

## Output

**Success:**
```markdown
‚úì Found {total_count} skills

- Workflow: {count}
- Project: {count}
- External: {count}

{Formatted skill list based on arguments}
```

**Empty state:**
```markdown
## Available Skills

### Workflow Skills (Core)
{List core skills - always present}

### Project Skills
No project skills yet.

### External Skills
No external plugins with skills installed.

**Total:** {workflow_count} skills available
```

Skills are the compound learning mechanism. Each skill represents accumulated knowledge that makes future work faster and more consistent.
