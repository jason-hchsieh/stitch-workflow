---
track_id: verbose-view_20260212
track_type: feature
size: small
created: 2026-02-12T14:00:00Z
status: in_progress
total_tasks: 3
completed_tasks: 3
---

## Overview

The mycelium-view skill currently shows a text-based preview of plans. This enhancement adds a `--verbose` flag that displays:
1. Extended task details (acceptance criteria, test plans, dependencies)
2. ASCII workflow diagram showing phase progression and task relationships
3. Visual representation of parallel vs sequential execution paths

This makes plan previews more informative and helps users understand the workflow structure at a glance.

## Success Criteria

- [ ] `/mycelium-view <task> --verbose` shows extended output with workflow diagram
- [ ] Default mode (without --verbose) maintains current brief output
- [ ] Workflow diagram uses ASCII art (box-drawing characters) for compatibility
- [ ] Diagram shows all 4 phases: Plan → Work → Review → Capture
- [ ] Task dependencies visualized with arrows/connectors
- [ ] Parallel tasks shown side-by-side, sequential tasks shown vertically
- [ ] Works for both new plan preview and existing plan viewing

## Phase 1: Argument Parsing & Extended Display

### Task 1.1: Add --verbose flag parsing to mycelium-view
**Status:** [x]
**Complexity:** T
**blockedBy:** []
**blocks:** [1.2, 1.3]
**agent:** general-purpose
**model:** sonnet

**Description:**
Update `skills/mycelium-view/SKILL.md` to parse `--verbose` flag from arguments. The flag can appear in any position after the task description or track_id.

Argument parsing examples:
- `/mycelium-view "task description" --verbose`
- `/mycelium-view --verbose "task description"`
- `/mycelium-view track_id --verbose`
- `/mycelium-view --verbose track_id`

**Implementation:**
Add to the "Parse arguments" section:
```markdown
1. **Parse arguments**:
   - `task description`: The feature/fix/optimization to preview (generates a new plan)
   - `track_id`: An existing plan's track ID to view (e.g., `auth_20260211`)
   - `--verbose`: Show extended details with workflow diagram (optional)
   - To distinguish: if the argument matches a `track_id` in `session_state.plans[]` or a plan file in `.mycelium/plans/`, treat it as an existing plan view. Otherwise, treat it as a new task description.
   - Extract `--verbose` flag if present and set verbose_mode boolean
```

**Acceptance Criteria:**
- [ ] --verbose flag detected in any argument position
- [ ] Works with both task descriptions and track_ids
- [ ] verbose_mode variable set correctly

**Test Plan:**
Test with various argument orders to ensure flag is detected correctly.

### Task 1.2: Extend display format with detailed task information
**Status:** [x]
**Complexity:** S
**blockedBy:** [1.1]
**blocks:** [1.3]
**agent:** general-purpose
**model:** sonnet

**Description:**
When `--verbose` is true, enhance the "Display preview" section to show extended task details:

**Current brief format:**
```markdown
#### Phase 1: [Phase Name]
- Task 1.1: [Task title] (Complexity: S/M/L, Agent: general-purpose)
```

**New verbose format:**
```markdown
#### Phase 1: [Phase Name]

##### Task 1.1: [Task title]
- **Complexity:** S (50-200 lines, 1-2 files, 30-120 min)
- **Agent:** general-purpose
- **Skills:** tdd, verification
- **Model:** sonnet
- **Blocked by:** [1.0] (or "None" if [])
- **Blocks:** [1.2, 2.1] (or "None" if [])

**Description:**
[Full task description from plan]

**Acceptance Criteria:**
- [ ] Criterion 1
- [ ] Criterion 2

**Test Plan:**
[How to verify this works]

---
```

**Files:** `skills/mycelium-view/SKILL.md`

**Acceptance Criteria:**
- [ ] Verbose mode shows all task metadata (complexity, agent, skills, model, dependencies)
- [ ] Verbose mode includes acceptance criteria and test plans
- [ ] Brief mode unchanged (backward compatible)
- [ ] Formatting is clean and readable

**Test Plan:**
Compare output with and without --verbose flag to verify extended details appear correctly.

## Phase 2: Workflow Diagram Generation

### Task 2.1: Generate ASCII workflow diagram
**Status:** [x]
**Complexity:** M
**blockedBy:** [1.1]
**blocks:** []
**agent:** general-purpose
**model:** sonnet

**Description:**
Create ASCII art workflow diagram showing:
1. **Phase flow:** Plan → Work → Review → Capture (horizontal boxes with arrows)
2. **Task dependencies:** Vertical layout within each phase, with arrows showing blockedBy relationships
3. **Parallel execution:** Side-by-side tasks with same vertical position indicate parallelizable work
4. **Status indicators:** Different symbols for completed [✓], in-progress [~], pending [ ]

**Example diagram format:**
```
Workflow Diagram:

┌─────────────────────────────────────────────────────────────────────┐
│                         MYCELIUM WORKFLOW                            │
└─────────────────────────────────────────────────────────────────────┘

  ┌──────────┐      ┌──────────┐      ┌──────────┐      ┌──────────┐
  │   PLAN   │─────▶│   WORK   │─────▶│  REVIEW  │─────▶│ CAPTURE  │
  └──────────┘      └──────────┘      └──────────┘      └──────────┘
      │                  │                  │                  │
      ▼                  ▼                  ▼                  ▼

  Phase 1            Phase 2            Phase 3            Phase 4
  ───────            ───────            ───────            ───────

  [ ] 1.1            [ ] 2.1            [ ] 3.1            [ ] 4.1
   │                  ┌┴─┐               │                  │
   ▼                  ▼  ▼               ▼                  ▼
  [ ] 1.2       [ ] 2.2  2.3          [ ] 3.2            [ ] 4.2
   │                  └┬─┘
   ▼                   ▼
  [ ] 1.3            [ ] 2.4

  Legend:
  ─────▶  Sequential flow
  ┌──┐    Parallel tasks (same level)
  [ ]     Pending task
  [~]     In progress
  [✓]     Completed
```

**Implementation approach:**
1. Parse plan file to extract phases, tasks, and dependencies
2. Build dependency graph (adjacency list)
3. Topologically sort tasks within each phase
4. Assign vertical positions (tasks with no dependencies get same level = parallel)
5. Render using box-drawing characters: ─ │ ┌ ┐ └ ┘ ├ ┤ ┬ ┴ ┼ ▶ ▼

**Files:** `skills/mycelium-view/SKILL.md`

**Acceptance Criteria:**
- [ ] Diagram shows all 4 workflow phases
- [ ] Tasks grouped by phase
- [ ] Dependencies shown with arrows/connectors
- [ ] Parallel tasks visually aligned
- [ ] Status symbols displayed correctly
- [ ] ASCII art renders correctly in terminal

**Test Plan:**
1. Test with simple plan (1 task per phase, no dependencies)
2. Test with complex plan (multiple tasks, dependencies, parallel execution)
3. Test with existing completed plan (verify status symbols)
4. Verify rendering in different terminal widths

## Deviations Log

(none yet)

## Final Checklist

- [ ] --verbose flag parsing works correctly
- [ ] Extended task details display in verbose mode
- [ ] Workflow diagram generates correctly
- [ ] ASCII art renders properly in terminal
- [ ] Backward compatible (default mode unchanged)
- [ ] Works with both new previews and existing plan views
- [ ] Documentation updated with --verbose examples
